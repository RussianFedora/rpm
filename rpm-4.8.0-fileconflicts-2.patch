From 75a0d6dcf4a571ddea3857e9e24e3fecc136defd Mon Sep 17 00:00:00 2001
From: Panu Matilainen <pmatilai@redhat.com>
Date: Thu, 26 May 2011 14:16:14 +0300
Subject: [PATCH] Colored conflict resolution part II - Same as commit
 7bbc9b073d9204f6ffb8a1091c189b80029d27a9 but   within the
 to-be-installed set

---
 lib/transaction.c |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/transaction.c b/lib/transaction.c
index 1d20100..2700ce6 100644
--- a/lib/transaction.c
+++ b/lib/transaction.c
@@ -506,7 +506,7 @@ assert(otherFi != NULL);
 
 		rConflicts = reportConflicts;
 		/* Resolve file conflicts to prefer Elf64 (if not forced) ... */
-		if (tscolor != 0) {
+		if (tscolor != 0 && FColor != 0 && oFColor != 0 && FColor != oFColor) {
 		    if (FColor & prefcolor) {
 			/* ... last file of preferred colour is installed ... */
 			if (!XFA_SKIPPING(rpmfsGetAction(fs, i)))
-- 
1.7.4.4

